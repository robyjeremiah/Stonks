{% extends 'base.html' %}
{% block stylesheet %}
<link rel="stylesheet" type="text/css" href="/static/adminHome.css" />
<link rel="stylesheet" type="text/css" href="/static/updateProfile.css" />
{% endblock %}
{% load static %}
{% block content %}

<h1>Welcome {{user.first_name}} {{user.last_name}}!</h1>
<div class="fields">
    <div class="adduserbox">
        <form method="POST">
            {% csrf_token %}
            <p>First Name:</p>
            {{ form.first_name }}
            <p>Last Name:</p>
            {{ form.last_name }}
            <p>Email:</p>
            {{ form.email }}
            <p>Date of Birth:</p>
            {{ form.dob }}
            <p>Role:</p>
            <select id="role" name="role">
                {% for group in group_list %}
                <option value="{{group.name}}">{{ group.name }}</option>
                {% endfor %}
            </select>
            <p>Password:</p>
            {{ form.password1 }}
            <p>Confirm Password:</p>
            {{ form.password2 }}
            <div class="required" style="display:none">
                <p>Passwords must contain the following:</p>
                <ul>
                    <li id='capital' class="invalid">Start with a letter</li>
                    <li id='length' class="invalid">At least 8 characters</li>
                    <li id='mixed' class="invalid">At least one letter, number, and special character each</li>
                </ul>
            </div>
            <br>
            <input type="submit" id="submit" name="Submit" value="ADD USER">
        </form>
    </div>
    <table class="usertable">
        <thead>
            <tr>
                <td>User</td>
                <td>Role</td>
                <td>Status</td>
                <td></td>
                <td></td>
            </tr>
        </thead>
        <tbody>
            {% if user_list and group_list %}
                {% for user in user_list %}
                <tr>
                    <td id='username' name='username'>{{ user.username }}</td>
                    <td>{{user.role}}</td>
                    <td id="status" name="status" value="{{user.is_staff}}">{% if user.is_staff == 1 %} Active {% else %} Inactive {% endif %}</td>
                    <td><button type="button" id="editButton" data-bs-toggle="modal" data-bs-target="#updateProfile">edit</button></td>
                    <td><a id="deleteButton" href="{%url 'delete_user' pk=user.pk %}">delete</a></td>
                </tr>
                {% endfor %}
            {% endif %}
        </tbody>
    </table>
    <div class="maincontainer modal fade" id="updateProfile">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">User Info</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="accountbox">
                        <img src="{% static 'images/Avatar.png' %}" class="userimage">
                        <h2>Username</h2>
                    </div>
                    <hr>
                    <form class="info">
                        <h5>Profile Information</h5>
                        <p>First Name:</p>
                        <input type="fname" name="edit-firstname" placeholder="django fname">
                        <p>Last Name:</p>
                        <input type="lname" name="edit-lastname" placeholder="django lname">
                        <p>Email:</p>
                        <input type="email" name="edit-email" placeholder="django fname">
                        <p>Password:</p>
                        <input type="password" name="edit-password" placeholder="django password">
                        <p>Image:</p>
                        <input type="file" name="edit-file"><br>
                    </form>
                </div>
                <div class="modal-footer info">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <input type="submit" name="" value="Update">
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}